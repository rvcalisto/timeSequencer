<!DOCTYPE html>

<html lang="en">

  <head>
    <title>Time Sequencer</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self'"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="shortcut icon" href="icons/icon.png" type="image/x-icon"/>
    <link rel="stylesheet" href="index.css"/>
    <script type="module" src="index.js"></script>
  </head>

  <template id="timerTemplate">
    <style>
      * {
        margin: 0;
        padding: 0;
        outline: none;
      }

      .wrapper {
        background: #323232;
        display: flex;
        justify-content: space-between;
        gap: 1em;
        padding: 1em;
        border-radius: .5em;
        user-select: none;

        :host(.selected) & {
          background: linear-gradient(45deg, #272727 50%, #323232 0);
          box-shadow: 0px 5px 10px #00000060;
        }
      }

      #timerInfo {
        width: 6rem;
        height: 6rem;
        display: flex;
        justify-content: center;
        flex-direction: column;
        background-image: url(./icons/clockUp.webp);
        background-size: 100% 100%;
        background-repeat: no-repeat;
        cursor: pointer;

        p {
          color: whitesmoke;
          font-weight: bold;
          margin: 0px auto;
          text-align: center;
          text-shadow: 0px 0px 6px black, 0px 0px 6px black;
        }
      }

      #properties {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 4px;
        overflow: hidden;
        width: 0rem;
        transition: .15s;

        :host(.selected) & {
          width: 12rem;
        }

        & > div {
          background: #181717;
          display: flex;
          align-items: baseline;
          height: 100%;
          gap: 4px;
          border-radius: .3rem;

          p {
            font-size: larger;
            font-weight: bold;
            color: silver;
            text-align: center;
            user-select: none;
          }
        }

        input, select, numeric-input {
          font-size: larger;
          font-weight: bold;
          color: inherit;
          background: inherit;
          width: 100%;
          height: 100%;
          border: none;
          border-radius: inherit;
          vertical-align: middle;

          &[type=number] {
            text-align: center;
          }
        }
      }

      .sideButtons {
        display: flex; 
        flex-direction: column; 
        justify-content: space-between;

        button {
          background: inherit;
          aspect-ratio: 1;
          padding: 1em;
          border: solid thin dimgray;
          border-radius: .3em;
          box-shadow: 0px 2px 0px;
          z-index: 1;
          transition: .1s;

          &:hover {
            cursor: pointer;
            filter: brightness(.9);
          }

          &:active {
            transform: scale(.9);
          }
        }
      }
    </style>
    <div class="wrapper">
      <div id="timerInfo">
        <p>Label</p>
        <p>Type</p>
        <p>Time</p>
      </div>
      <div id="properties">
        <div>
          <p style="margin: 0 .5em;">Label</p>
          <input id="editorLabel" type="text" placeholder="Timer Label" spellcheck="false" title="Timer label"/>
        </div>
        <div>
          <p style="margin: 0 .5em;">Type</p>
          <select id="editorType" title="Timer type">
            <option>Count-Up</option>
            <option>Count-Down</option>
          </select>
        </div>
        <div>
          <numeric-input id="editorHour" type="number" min="0" max="" value="00" title="Hours"></numeric-input>
          <p>:</p>
          <numeric-input id="editorMin" type="number" min="0" max="" value="00" title="Minutes"></numeric-input>
          <p>:</p>
          <numeric-input id="editorSec" type="number" min="0" max="" value="05" title="Seconds"></numeric-input>
        </div>
      </div>
      <div class="sideButtons">
        <button class="remove" title="Remove timer">‚úñÔ∏è</button>
        <button class="addNew" title="Create new timer here">‚ûï</button>
      </div>
    </div>
  </template>

  <body>
    <div id="overlay" style="display: none;">
      <button id="closeOverlay">‚ùå</button>
      <div style="display: flex; height: 100%; width: 100%;">
        <div id="overlayHist"></div>
        <div id="overlayDisplay">
          <div class="overlayInfo">
            <p>‚è±Ô∏è</p>
            <p>Label</p>
            <p style="font-size: small;" >seq: 1/1 timer: 1/1</p>
            <p>Timer</p>
            <p style="font-size: small;">0s</p>
          </div>
          <div class="flowControl">
            <button id="ctrlPrev" title="Previous Timer">‚èÆÔ∏è</button>
            <button id="ctrlToggle" title="Play/Pause">‚è∏Ô∏è</button>
            <button id="ctrlNext" title="Next Timer">‚è≠Ô∏è</button>
            <button id="ctrlAdd" title="Add +1 execution">üîÅ</button>
          </div>
        </div>
      </div>
    </div>
    <main>
      <header>
        <div>
          <input id="sequenceTitle" type="text" spellcheck="false" placeholder="Sequence Name"/>
          <button id="saveSequence" title="Save sequence" disabled >üíæ</button>
        </div>
        <div>
          <div style="display: inline-flex;">
            <h2>x</h2>
            <numeric-input id="executeCount" title="Repetition, scroll to increment/decrement"></numeric-input>
          </div>
          <h2 id="estimatedTime" style="user-select: none; margin-left: auto;" title="Estimated duration">0s</h2>
          <button id="startSequence" title="Start sequence">‚ñ∂Ô∏è</button>
        </div>
      </header>
      <div id="sequenceList"></div>
      <div id="sequencer"></div>
    </main>
  </body>

</html>
